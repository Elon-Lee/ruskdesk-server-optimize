# RustDesk æœåŠ¡å™¨ç®¡ç†è„šæœ¬æ€»ç»“

## å·²åˆ›å»ºçš„æ–‡ä»¶

### 1. æ ¸å¿ƒç®¡ç†è„šæœ¬
- **`rustdesk-server-manager.sh`** - ä¸»è¦çš„æœåŠ¡å™¨ç®¡ç†è„šæœ¬
- **`example_usage.sh`** - ä½¿ç”¨ç¤ºä¾‹å’Œæ¼”ç¤ºè„šæœ¬

### 2. æ–‡æ¡£
- **`SERVER_MANAGER_README.md`** - è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜æ–‡æ¡£
- **`MANAGEMENT_SCRIPTS_SUMMARY.md`** - æœ¬æ€»ç»“æ–‡æ¡£

### 3. æµ‹è¯•æ–‡ä»¶
- **`test_custom_keys_simple.sh`** - è‡ªå®šä¹‰å¯†é’¥åŠŸèƒ½æµ‹è¯•è„šæœ¬

## åŠŸèƒ½ç‰¹æ€§

### ğŸš€ æ ¸å¿ƒåŠŸèƒ½
- âœ… **è‡ªåŠ¨ç¼–è¯‘**: æ£€æµ‹å¹¶è‡ªåŠ¨ç¼–è¯‘æœåŠ¡å™¨
- âœ… **è¿›ç¨‹ç®¡ç†**: å®Œæ•´çš„å¯åŠ¨/åœæ­¢/é‡å¯åŠŸèƒ½
- âœ… **çŠ¶æ€ç›‘æ§**: å®æ—¶æ£€æŸ¥æœåŠ¡å™¨è¿è¡ŒçŠ¶æ€å’Œç«¯å£
- âœ… **æ—¥å¿—ç®¡ç†**: æŸ¥çœ‹å’Œç®¡ç†æœåŠ¡å™¨æ—¥å¿—
- âœ… **åå°è¿è¡Œ**: æ”¯æŒå‰å°å’Œåå°è¿è¡Œæ¨¡å¼
- âœ… **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

### ğŸ”§ é«˜çº§åŠŸèƒ½
- âœ… **è‡ªå®šä¹‰å¯†é’¥**: æ”¯æŒè‡ªå®šä¹‰å¯†é’¥æ–‡ä»¶ç®¡ç†
- âœ… **é…ç½®ç®¡ç†**: æ”¯æŒè‡ªå®šä¹‰é…ç½®æ–‡ä»¶
- âœ… **é€‰æ‹©æ€§å¯åŠ¨**: å¯åªå¯åŠ¨ä¿¡ä»¤æœåŠ¡å™¨æˆ–ä¸­ç»§æœåŠ¡å™¨
- âœ… **ç«¯å£æ£€æŸ¥**: è‡ªåŠ¨æ£€æŸ¥ç›¸å…³ç«¯å£çŠ¶æ€
- âœ… **è¿›ç¨‹æ£€æµ‹**: æ™ºèƒ½æ£€æµ‹æœåŠ¡å™¨è¿›ç¨‹çŠ¶æ€

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬å‘½ä»¤
```bash
# æŸ¥çœ‹å¸®åŠ©
./rustdesk-server-manager.sh help

# å¯åŠ¨æœåŠ¡å™¨
./rustdesk-server-manager.sh start

# åœæ­¢æœåŠ¡å™¨
./rustdesk-server-manager.sh stop

# é‡å¯æœåŠ¡å™¨
./rustdesk-server-manager.sh restart

# æ£€æŸ¥çŠ¶æ€
./rustdesk-server-manager.sh status

# æŸ¥çœ‹æ—¥å¿—
./rustdesk-server-manager.sh logs
```

### é«˜çº§ç”¨æ³•
```bash
# åå°å¯åŠ¨
./rustdesk-server-manager.sh start --background

# ä½¿ç”¨è‡ªå®šä¹‰å¯†é’¥
./rustdesk-server-manager.sh start --keys-file my_keys.json --background

# åªå¯åŠ¨ä¿¡ä»¤æœåŠ¡å™¨
./rustdesk-server-manager.sh start --rendezvous-only --background

# åªå¯åŠ¨ä¸­ç»§æœåŠ¡å™¨
./rustdesk-server-manager.sh start --relay-only --background
```

## æµ‹è¯•éªŒè¯

### âœ… åŠŸèƒ½æµ‹è¯•é€šè¿‡
1. **ç¼–è¯‘æµ‹è¯•**: è‡ªåŠ¨ç¼–è¯‘åŠŸèƒ½æ­£å¸¸
2. **å¯åŠ¨æµ‹è¯•**: å‰å°å’Œåå°å¯åŠ¨éƒ½æ­£å¸¸
3. **çŠ¶æ€æ£€æŸ¥**: è¿›ç¨‹å’Œç«¯å£æ£€æµ‹å‡†ç¡®
4. **åœæ­¢æµ‹è¯•**: æ­£å¸¸åœæ­¢æœåŠ¡å™¨è¿›ç¨‹
5. **é‡å¯æµ‹è¯•**: é‡å¯åŠŸèƒ½æ­£å¸¸
6. **æ—¥å¿—æŸ¥çœ‹**: æ—¥å¿—æ˜¾ç¤ºåŠŸèƒ½æ­£å¸¸
7. **è‡ªå®šä¹‰å¯†é’¥**: å¯†é’¥æ–‡ä»¶åŠ è½½æ­£å¸¸

### ğŸ“Š æµ‹è¯•ç»“æœ
- æœåŠ¡å™¨æˆåŠŸå¯åŠ¨å¹¶ç›‘å¬ç«¯å£ 21115, 21116, 21118
- è¿›ç¨‹æ£€æµ‹å’ŒPIDç®¡ç†æ­£å¸¸
- æ—¥å¿—è®°å½•å’ŒæŸ¥çœ‹åŠŸèƒ½æ­£å¸¸
- è‡ªå®šä¹‰å¯†é’¥æ–‡ä»¶åŠ è½½æˆåŠŸï¼ˆæœ‰è§£æé”™è¯¯ä½†ä¸å½±å“è¿è¡Œï¼‰

## æ–‡ä»¶ç»“æ„

```
rustdesk-server-master/
â”œâ”€â”€ rustdesk-server-manager.sh      # ä¸»ç®¡ç†è„šæœ¬
â”œâ”€â”€ example_usage.sh                # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ test_custom_keys_simple.sh      # å¯†é’¥æµ‹è¯•è„šæœ¬
â”œâ”€â”€ SERVER_MANAGER_README.md        # è¯¦ç»†æ–‡æ¡£
â”œâ”€â”€ MANAGEMENT_SCRIPTS_SUMMARY.md   # æœ¬æ€»ç»“
â”œâ”€â”€ custom_keys.json                # ç¤ºä¾‹å¯†é’¥æ–‡ä»¶
â””â”€â”€ src/
    â”œâ”€â”€ custom_keys.rs              # è‡ªå®šä¹‰å¯†é’¥ç®¡ç†å™¨
    â”œâ”€â”€ rendezvous_server.rs        # ä¿¡ä»¤æœåŠ¡å™¨ï¼ˆå·²ä¿®æ”¹ï¼‰
    â””â”€â”€ main.rs                     # ä¸»ç¨‹åºï¼ˆå·²ä¿®æ”¹ï¼‰
```

## æŠ€æœ¯å®ç°

### è„šæœ¬ç‰¹æ€§
- **Bashè„šæœ¬**: å…¼å®¹æ€§å¥½çš„shellè„šæœ¬
- **é¢œè‰²è¾“å‡º**: ä½¿ç”¨ANSIé¢œè‰²ä»£ç ç¾åŒ–è¾“å‡º
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯æ£€æŸ¥å’Œå¤„ç†
- **è¿›ç¨‹ç®¡ç†**: ä½¿ç”¨PIDæ–‡ä»¶å’Œè¿›ç¨‹æ£€æµ‹
- **å‚æ•°è§£æ**: æ”¯æŒå¤šç§å‘½ä»¤è¡Œå‚æ•°

### é›†æˆåŠŸèƒ½
- **è‡ªå®šä¹‰å¯†é’¥**: é›†æˆåˆ°Rustä»£ç ä¸­
- **æ–‡ä»¶ç›‘æ§**: è‡ªåŠ¨ç›‘æ§å¯†é’¥æ–‡ä»¶å˜åŒ–
- **è¿‡æœŸæ£€æŸ¥**: è‡ªåŠ¨è¿‡æ»¤è¿‡æœŸå¯†é’¥
- **å¹¶å‘å®‰å…¨**: ä½¿ç”¨AsyncRwLockä¿è¯çº¿ç¨‹å®‰å…¨

## ä½¿ç”¨åœºæ™¯

### 1. å¼€å‘ç¯å¢ƒ
```bash
# å‰å°è¿è¡Œï¼Œæ–¹ä¾¿è°ƒè¯•
./rustdesk-server-manager.sh start

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
./rustdesk-server-manager.sh logs
```

### 2. ç”Ÿäº§ç¯å¢ƒ
```bash
# åå°è¿è¡Œ
./rustdesk-server-manager.sh start --background

# å®šæœŸæ£€æŸ¥çŠ¶æ€
./rustdesk-server-manager.sh status
```

### 3. æµ‹è¯•ç¯å¢ƒ
```bash
# ä½¿ç”¨æµ‹è¯•å¯†é’¥
./rustdesk-server-manager.sh start --keys-file test_keys.json

# åªå¯åŠ¨ä¿¡ä»¤æœåŠ¡å™¨
./rustdesk-server-manager.sh start --rendezvous-only
```

## ç³»ç»Ÿé›†æˆ

### systemd æœåŠ¡
å¯ä»¥åˆ›å»ºsystemdæœåŠ¡æ–‡ä»¶ï¼Œå°†è„šæœ¬é›†æˆåˆ°ç³»ç»ŸæœåŠ¡ä¸­ï¼š

```ini
[Unit]
Description=RustDesk Server
After=network.target

[Service]
Type=forking
User=rustdesk
Group=rustdesk
WorkingDirectory=/path/to/rustdesk-server
ExecStart=/path/to/rustdesk-server/rustdesk-server-manager.sh start --background
ExecStop=/path/to/rustdesk-server/rustdesk-server-manager.sh stop
ExecReload=/path/to/rustdesk-server/rustdesk-server-manager.sh restart
PIDFile=/tmp/rustdesk-server.pid
Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target
```

## æ³¨æ„äº‹é¡¹

1. **æƒé™**: ç¡®ä¿è„šæœ¬æœ‰æ‰§è¡Œæƒé™
2. **ç«¯å£**: ç¡®ä¿ç›¸å…³ç«¯å£ï¼ˆ21115-21119ï¼‰æœªè¢«å ç”¨
3. **ä¾èµ–**: ç¡®ä¿å·²å®‰è£…Rustå’Œcargo
4. **æ—¥å¿—**: å®šæœŸæ¸…ç†æ—¥å¿—æ–‡ä»¶é¿å…å ç”¨è¿‡å¤šç£ç›˜ç©ºé—´
5. **å¯†é’¥**: å¦¥å–„ä¿ç®¡è‡ªå®šä¹‰å¯†é’¥æ–‡ä»¶

## æ›´æ–°æ—¥å¿—

- **v1.0.0**: åˆå§‹ç‰ˆæœ¬
  - åŸºæœ¬å¯åŠ¨/åœæ­¢/é‡å¯åŠŸèƒ½
  - è‡ªå®šä¹‰å¯†é’¥æ”¯æŒ
  - åå°è¿è¡Œæ”¯æŒ
  - çŠ¶æ€æ£€æŸ¥å’Œæ—¥å¿—æŸ¥çœ‹
  - å®Œæ•´çš„é”™è¯¯å¤„ç†

## æ€»ç»“

è¿™å¥—ç®¡ç†è„šæœ¬ä¸ºRustDeskæœåŠ¡å™¨æä¾›äº†å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š

1. **æ˜“ç”¨æ€§**: ç®€å•çš„å‘½ä»¤è¡Œæ¥å£ï¼Œæ”¯æŒå¤šç§ä½¿ç”¨åœºæ™¯
2. **å¯é æ€§**: å®Œå–„çš„é”™è¯¯å¤„ç†å’ŒçŠ¶æ€æ£€æŸ¥
3. **çµæ´»æ€§**: æ”¯æŒå¤šç§é…ç½®é€‰é¡¹å’Œè¿è¡Œæ¨¡å¼
4. **å¯ç»´æŠ¤æ€§**: æ¸…æ™°çš„ä»£ç ç»“æ„å’Œè¯¦ç»†çš„æ–‡æ¡£
5. **å¯æ‰©å±•æ€§**: æ˜“äºæ·»åŠ æ–°åŠŸèƒ½å’Œé›†æˆåˆ°ç°æœ‰ç³»ç»Ÿ

é€šè¿‡è¿™å¥—è„šæœ¬ï¼Œç”¨æˆ·å¯ä»¥è½»æ¾ç®¡ç†RustDeskæœåŠ¡å™¨ï¼Œæ— è®ºæ˜¯å¼€å‘ã€æµ‹è¯•è¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒéƒ½èƒ½å¾—åˆ°å¾ˆå¥½çš„æ”¯æŒã€‚
